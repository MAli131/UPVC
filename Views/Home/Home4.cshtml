@model UPVC.ViewModels.HomeViewModel
@using System.Globalization
@{
    // Layout Customization Flags
    ViewData["UseGreenNavbar"] = true;
    ViewData["ShowNavbar"] = true;
    
    var isArabic = CultureInfo.CurrentCulture.Name.StartsWith("ar");
    // Get current language from cookie or default to English
    var currentLang = Context.Request.Cookies["selectedLanguage"] ?? "en";
    
    // Get page content based on language
    var title = isArabic ? Model.HomePage?.TitleAr : Model.HomePage?.TitleEn;
    var subtitle = isArabic ? Model.HomePage?.SubtitleAr : Model.HomePage?.SubtitleEn;
    var content = isArabic ? Model.HomePage?.ContentAr : Model.HomePage?.ContentEn;
    var contentOther = isArabic ? Model.HomePage?.ContentOtherAr : Model.HomePage?.ContentOtherEn;
    
    // Company info
    var companyName = isArabic ? Model.CompanyInfo?.NameAr : Model.CompanyInfo?.NameEn;
    var companyAddress = isArabic ? Model.CompanyInfo?.AddressAr : Model.CompanyInfo?.AddressEn;
    var companyEmail = Model.CompanyInfo?.Email;
    ViewData["Title"] = companyName;
    var companyPhone = Model.CompanyInfo?.Phone ?? "15726";
}

<section class="hero-section home4">
    <div class="container">

        <!-- Navigation Dots -->
        <div class="vertical-dots green-dots">
            <a asp-controller="Home" asp-action="Index" class="dot"></a>
            <a asp-controller="Home" asp-action="Home2" class="dot"></a>
            <a asp-controller="Home" asp-action="Home3" class="dot"></a>
            <a asp-controller="Home" asp-action="Home4" class="dot active"></a>
        </div>

        <!-- Hero Content -->
        <div class="home-content">
            <div class="row row-cols-1 row-cols-lg-2">
                <div class="hero-content col">
                    <h1 class="hero-title">@title</h1>

                    @if (!string.IsNullOrEmpty(subtitle))
                    {
                        <p class="hero-description">
                            @subtitle
                        </p>
                    }

                    @if (!string.IsNullOrEmpty(content))
                    {
                        <p class="hero-description">
                            @content
                        </p>
                    }

                    @if (!string.IsNullOrEmpty(contentOther))
                    {
                        <p class="hero-description">
                            @contentOther
                        </p>
                    }
                </div>

                <!-- Logos -->
                <div class="hero-logos col row row-cols-3">
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo1.png" alt="Logo" loading="lazy" />
                    </div>
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo2.png" alt="Logo" loading="lazy" />
                    </div>
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo3.png" alt="Logo" loading="lazy" />
                    </div>
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo4.png" alt="Logo" loading="lazy" />
                    </div>
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo5.png" alt="Logo" loading="lazy" />
                    </div>
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo6.png" alt="Logo" loading="lazy" />
                    </div>
                    <div class="logo-item col">
                        <img class="img-fluid" src="~/images/home/home4-logo7.png" alt="Logo" loading="lazy" />
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="hero-footer green-footer">
            <div class="hero-address">
                @if (!string.IsNullOrEmpty(companyAddress))
                {
                    <p>@Html.Raw(companyAddress)</p>
                }
                else
                {
                    <p>
                        <span>@(isArabic ? "مدينة السادس من أكتوبر المنطقة الصناعية 1" : "6th of October City Industrial Zone 1")</span>,
                        <span>@(isArabic ? "قطعة رقم 238 - الجيزة" : "Land no.238 - Giza")</span>,
                        <span>@(isArabic ? "مصر" : "Egypt")</span>
                    </p>
                }
                <p>@(companyEmail ?? "info@emapen.net")</p>
            </div>
            <div class="hotline d-flex d-lg-none">
                <span class="hotline-number">@companyPhone</span>
                <p class="ms-1">@(isArabic ? "الخط الساخن" : "Hotline")</p>
            </div>
            <p>
                &copy;
                <script>
                    document.write(new Date().getFullYear());
                </script>
                @if (ViewBag.CompanyInfo != null)
                {
                    @(isArabic ? ViewBag.CompanyInfo.CopyrightTextAr ?? "إيمابن جميع الحقوق محفوظة" : ViewBag.CompanyInfo.CopyrightTextEn ?? "EMAPEN all rights reserved")
                }
                else
                {
                    @companyName @(isArabic ? "جميع الحقوق محفوظة" : "all rights reserved")
                }
            </p>
        </div>

    </div>
</section>

@section Scripts {
    <!-- Chatbot Widget -->
    <script>
        // Pass company info to chatbot
        window.chatbotConfig = {
            whatsappNumber: '@(ViewBag.companyInfo?.Mobile ?? companyPhone ?? "")',
            contactUrl: '@Url.Action("Index", "Contact")'
        };
    </script>
    <script src="~/js/chatbot.js" asp-append-version="true"></script>
    <script src="~/js/lang.js"></script>
    <script src="~/js/home-navigation.js"></script>
}
